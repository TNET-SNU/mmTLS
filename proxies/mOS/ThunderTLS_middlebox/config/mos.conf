############### MOS configuration file ###############

#######################
# MOS-RELATED OPTIONS #
#######################
mos {
	forward = 1

	#######################
	##### I/O OPTIONS #####
	#######################
	# number of memory channels per socket [mandatory for DPDK]
	nb_mem_channels = 8

	# devices used for MOS applications [mandatory]
	netdev {
		# use 1 core
		# ens7f0 0x00000001
		# ens7f1 0x00000001
		# ens10f0 0x00000001
		# ens10f1 0x00000001
		# use 2 cores
		# ens7f0 0x00000003
		# ens7f1 0x00000003
		# ens10f0 0x00000003
		# ens10f1 0x00000003
		# use 3 cores
		# ens7f0 0x00000007
		# ens7f1 0x00000007
		# ens10f0 0x00000007
		# ens10f1 0x00000007
		# use 4 cores
		# ens7f0 0x0000000f
		# ens7f1 0x0000000f
		# ens10f0 0x0000000f
		# ens10f1 0x0000000f
		# use 5 cores
		# ens7f0 0x0000001f
		# ens7f1 0x0000001f
		# ens10f0 0x0000001f
		# ens10f1 0x0000001f
		# use 8 cores
		# ens7f0 0x000000ff
		# ens7f1 0x000000ff
		# ens10f0 0x000000ff
		# ens10f1 0x000000ff
		# use 9 cores
		# ens7f0 0x000001ff
		# ens7f1 0x000001ff
		# ens10f0 0x000001ff
		# ens10f1 0x000001ff
		# use 14 cores
		# ens7f0 0x00003fff
		# ens7f1 0x00003fff
		# ens10f0 0x00003fff
		# ens10f1 0x00003fff
		# use 16 cores
		ens7f0 0x0000ffff
		ens7f1 0x0000ffff
		# ens10f0 0x0000ffff
		# ens10f1 0x0000ffff
		# use 17 cores
		# ens7f0 0x0001ffff
		# ens7f1 0x0001ffff
		# ens10f0 0x0001ffff
		# ens10f1 0x0001ffff
	}

	#######################
	### LOGGING OPTIONS ###
	#######################
	# NICs to print network statistics per second
	# if enabled, mTCP will print xx Gbps and xx pps for RX and TX
	# stat_print = ens7f0np0 ens7f1np1
	
	# A directory contains MOS system log files
	# mos_log = logs/

	########################
	## NETWORK PARAMETERS ##
	########################
	# This to configure static arp table
	# (Destination IP address)/(Prefix) (Destination MAC address)
	arp_table {
		# 10.1.90.31/32 b8:ce:f6:d2:ca:46 # box1
		# 10.1.90.32/32 08:c0:eb:62:45:04 # box2
		10.1.90.34/32 08:c0:eb:62:45:04 # box4
		10.1.90.43/32 08:c0:eb:62:44:d0 # snow3

		# 10.1.90.11/32 98:03:9b:3f:b4:3e # tree1
		10.1.90.21/32 98:03:9b:1e:dd:48 # wood1
		10.1.90.41/32 10:70:fd:61:90:dc # giant1

		# 10.1.95.31/32 b8:ce:f6:d2:ca:47 # box1-2nd
		# 10.1.95.32/32 08:c0:eb:62:45:05 # box2-2nd
		10.1.95.34/32 08:c0:eb:62:45:05 # box4-2nd
		10.1.95.43/32 08:c0:eb:62:44:d1 # snow3-2nd

		# 10.1.95.14/32 98:03:9b:1e:de:30 # tree4
		10.1.95.22/32 98:03:9b:7f:c4:9c # wood2
		10.1.95.42/32 10:70:fd:61:7e:04 # giant2

	}

	# This is to configure static routing table
	# (Destination address)/(Prefix) (Device name)
	route_table {
		# 10.1.90.31/24 ens7f0 # box1
		# 10.1.90.32/24 ens7f0 # box2
		10.1.90.34/24 ens7f0 # box4
		10.1.90.43/24 ens7f0 # snow3

		# 10.1.90.11/24 ens7f0  # tree1
		10.1.90.21/24 ens7f0 # wood1
		10.1.90.41/24 ens7f0 # giant1

		# 10.1.95.31/24 ens7f1 # box1-2nd
		# 10.1.95.32/24 ens7f1 # box2-2nd
		10.1.95.34/24 ens7f1 # box4-2nd
		10.1.95.43/24 ens7f1 # snow3-2nd

		# 10.1.95.14/24 ens7f1 # tree4
		10.1.95.22/24 ens7f1 # wood2
		10.1.95.42/24 ens7f1 # giant2

	}


	# This is to configure static bump-in-the-wire NIC forwarding table
	# DEVNIC_A DEVNIC_B ## (e.g. dpdk0 dpdk1) 
	nic_forward_table {
		# ens7f0 ens10f0
		# ens7f1 ens10f1
	}

	########################
	### ADVANCED OPTIONS ###
	########################
	# if required, uncomment the following options and change them

	# maximum concurrency per core [optional / default : 100000]
	# (MOS-specific parameter for preallocation)
	max_concurrency = 6000


	# disable the ring buffer [optional / default : 0]
	# use disabled buffered managment only for standalone monitors.
	# end host applications always need recv buffers for TCP!
	# no_ring_buffers = 1

	# receive buffer size of sockets [optional / default : 1048576 (1M)]
	# rmem_size = 1048576

	# send buffer size of sockets [optional / default : 1048576 (1M)]
	# wmem_size = 1048576

	# tcp timewait seconds [optional / default : 0]
	# tcp_tw_interval = 0

	# tcp timeout seconds [optional / default : 30]
	# (set tcp_timeout = -1 to disable timeout checking)
	tcp_timeout = -1
}
